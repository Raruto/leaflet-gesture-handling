!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self)["leaflet-gesture-handling"]={})}(this,(function(e){"use strict";var t={touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use âŒ˜ + scroll to zoom the map"};const n=(document.currentScript&&document.currentScript.src||{url:"undefined"==typeof document?new(require("url").URL)("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("leaflet-gesture-handling.min.js",document.baseURI).href}&&("undefined"==typeof document?new(require("url").URL)("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("leaflet-gesture-handling.min.js",document.baseURI).href)).split("/").slice(0,-1).join("/")+"/";var i=!1,a={text:{},duration:1700},s=L.Handler.extend({_isScrolling:!1,_isTouching:!1,_isFading:!1,addHooks:function(){this._handleTouch=L.bind(this._handleTouch,this),this._setGestureHandlingOptions(),this._disableInteractions(),this._map._container.addEventListener("touchstart",this._handleTouch),this._map._container.addEventListener("touchmove",this._handleTouch),this._map._container.addEventListener("touchend",this._handleTouch),this._map._container.addEventListener("touchcancel",this._handleTouch),this._map._container.addEventListener("click",this._handleTouch),L.DomEvent.on(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.on(this._map._container,"mouseenter",this._handleMouseOver,this),L.DomEvent.on(this._map._container,"mouseleave",this._handleMouseOut,this),L.DomEvent.on(this._map,"movestart",this._handleDragging,this),L.DomEvent.on(this._map,"move",this._handleDragging,this),L.DomEvent.on(this._map,"moveend",this._handleDragging,this),this._map.on("popupopen",this._handleScrollOnPopup,this),this._map.on("popupclose",this._handleScrollOnPopup,this),L.DomEvent.off(this._map,"enterFullscreen",this._onEnterFullscreen,this),L.DomEvent.off(this._map,"exitFullscreen",this._onExitFullscreen,this),L.DomEvent.on(this._map,"enterFullscreen",this._onEnterFullscreen,this),L.DomEvent.on(this._map,"exitFullscreen",this._onExitFullscreen,this),L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling")},removeHooks:function(){this._enableInteractions(),this._map._container.removeEventListener("touchstart",this._handleTouch),this._map._container.removeEventListener("touchmove",this._handleTouch),this._map._container.removeEventListener("touchend",this._handleTouch),this._map._container.removeEventListener("touchcancel",this._handleTouch),this._map._container.removeEventListener("click",this._handleTouch),L.DomEvent.off(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.off(this._map._container,"mouseenter",this._handleMouseOver,this),L.DomEvent.off(this._map._container,"mouseleave",this._handleMouseOut,this),L.DomEvent.off(this._map,"movestart",this._handleDragging,this),L.DomEvent.off(this._map,"move",this._handleDragging,this),L.DomEvent.off(this._map,"moveend",this._handleDragging,this),this._map.off("popupopen",this._handleScrollOnPopup,this),this._map.off("popupclose",this._handleScrollOnPopup,this),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling")},_handleDragging:function(e){"movestart"==e.type||"move"==e.type?i=!0:"moveend"==e.type&&(i=!1)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){if(this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable(),parseInt(L.version.split(".")[1],10)<8){var e=navigator.userAgent.indexOf("Chrome")>-1,t=navigator.userAgent.indexOf("Safari")>-1;!e&&t&&this._map.tap.disable()}},_enableWarning:function(e){clearTimeout(this._isFading),L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-"+e),L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-warning")},_disableWarning:function(e,t){clearTimeout(this._isFading),this._isFading=setTimeout(L.bind((function(e){L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-"+e)}),this,e),t||this._map.options.gestureHandlingOptions.duration),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-warning")},_isLanguageContent:function(e){return e&&e.touch&&e.scroll&&e.scrollMac},_isMacUser:function(){return navigator.platform.toUpperCase().indexOf("MAC")>=0},_parseGestureHandlingOptions:function(){var e=this._map.options.gestureHandlingOptions.text||this._map.options.gestureHandlingText||a.text,t=this._map.options.gestureHandlingOptions.duration||this._map.options.gestureHandlingDuration||a.duration,n=L.extend(this._map.options.gestureHandlingOptions,a);return n.text=e,n.duration=t,n},_setGestureHandlingOptions:function(){var e=this._parseGestureHandlingOptions();(this._isLanguageContent(e.text)?Promise.resolve(e.text):this._getLanguageContent(e.locale)).then((e=>{this._map._container.setAttribute("data-gesture-handling-touch-content",e.touch),this._map._container.setAttribute("data-gesture-handling-scroll-content",e.scroll),this._touchWarning=e.touch,this._scrollWarning=e.scroll}))},_getUserLanguage:function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},_getLanguageContent:function(e){e=e||this._getUserLanguage()||"en";var i,a=new Promise((e=>{i=e})),s=e=>{var t=e.default||{};t.scroll=this._isMacUser()?t.scrollMac:t.scroll,i(t)};return import(n+"./locales/"+e+".js").then(s).catch((i=>import(n+"./locales/"+e.split("-")[0]+".js").then(s).catch((e=>Promise.resolve({default:t}).then(s))))),a},_hasClass:function(e,t){for(var n=0;n<t.length;n++)if(L.DomUtil.hasClass(e,t[n]))return!0;return!1},_handleTouch:function(e){this._hasClass(e.target,["leaflet-control-minimap","leaflet-interactive","leaflet-popup-content","leaflet-popup-content-wrapper","leaflet-popup-close-button","leaflet-control-zoom-in","leaflet-control-zoom-out"])?L.DomUtil.hasClass(e.target,"leaflet-interactive")&&"touchmove"===e.type&&1===e.touches.length?this._enableTouchWarning():this._disableTouchWarning():"touchmove"!==e.type&&"touchstart"!==e.type?this._disableTouchWarning():1===e.touches.length?this._enableTouchWarning():(e.preventDefault(),this._disableTouchWarning(),this._enableInteractions())},_enableTouchWarning:function(){this._enableWarning("touch"),this._disableInteractions()},_disableTouchWarning:function(e){clearTimeout(this._isTouching),this._isTouching=setTimeout(L.bind((function(){this._disableWarning("touch")}),this),e||0)},_enableScrollWarning:function(){this._enableWarning("scroll"),this._map.scrollWheelZoom.disable()},_disableScrollWarning:function(e){clearTimeout(this._isScrolling),this._isScrolling=setTimeout(L.bind((function(){this._disableWarning("scroll"),this._map.scrollWheelZoom.enable()}),this),e||0)},_handleScroll:function(e){e.metaKey||e.ctrlKey||e.shiftKey&&this._map._rotate?(e.preventDefault(),this._disableScrollWarning()):(this._enableScrollWarning(),this._disableScrollWarning(this._map.options.gestureHandlingOptions.duration))},_handleScrollOnPopup:function(e){L.DomEvent["popupopen"==e.type?"on":"off"](e.popup._contentNode,"wheel",this._handleScroll,this)},_handleMouseOver:function(e){this._enableInteractions()},_handleMouseOut:function(e){i||this._disableInteractions()},_onExitFullscreen:function(){this._map.options.gestureHandling&&this._map.gestureHandling.enable()},_onEnterFullscreen:function(){this._map.options.gestureHandling&&this._map.gestureHandling.disable()}});L.Map.mergeOptions({gestureHandlingOptions:a}),L.Map.addInitHook("addHandler","gestureHandling",s),e.GestureHandling=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=leaflet-gesture-handling.min.js.map
